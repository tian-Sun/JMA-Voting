# FanFever æŠ•ç¥¨æ•°æ®çœ‹æ¿

ä¸€ä¸ªåŸºäº Next.js + Tailwind CSS æ„å»ºçš„å®æ—¶æŠ•ç¥¨æ•°æ®ç›‘æ§çœ‹æ¿ï¼Œæ”¯æŒæ¦œå•æ¦‚è§ˆã€è¶‹åŠ¿åˆ†æå’Œæ¦œå•çƒ­åº¦ä¸‰å¤§æ ¸å¿ƒåŠŸèƒ½ã€‚

## ğŸ¯ é¡¹ç›®æ¦‚è¿°

### æ ¸å¿ƒåŠŸèƒ½
- **æ¦œå•æ¦‚è§ˆ**: Top 75 è‰ºäººæ’è¡Œæ¦œï¼Œæ”¯æŒé˜¶æ®µåˆ‡æ¢ã€åˆ†ç±»ç­›é€‰å’Œå…³é”®è¯æœç´¢
- **è¶‹åŠ¿åˆ†æ**: æŠ•ç¥¨æŠ˜çº¿å›¾å’Œæ’åè¶‹åŠ¿å›¾ï¼Œæ”¯æŒå¤šè‰ºäººå¯¹æ¯”
- **æ¦œå•çƒ­åº¦**: æ•´æ¦œæ€»ç¥¨æ•°åˆ†æã€Top 10 å æ¯”é¥¼å›¾å’Œé»‘é©¬æ¦œ

### æŠ€æœ¯ç‰¹æ€§
- ğŸš€ Next.js 14 + App Router
- ğŸ¨ Tailwind CSS + è‡ªå®šä¹‰ç»„ä»¶ç³»ç»Ÿ
- ğŸ“Š ECharts å›¾è¡¨åº“
- ğŸ“± å“åº”å¼è®¾è®¡ï¼Œå®Œç¾é€‚é…ç§»åŠ¨ç«¯
- ğŸ”„ è‡ªåŠ¨åŒ–æ•°æ®è·å–å’Œéƒ¨ç½²
- ğŸ“ˆ è™šæ‹Ÿæ»šåŠ¨ä¼˜åŒ–å¤§æ•°æ®è¡¨æ ¼
- ğŸ’¾ Gzip æ•°æ®å‹ç¼©

## ğŸ“ é¡¹ç›®ç»“æ„

```
JMA-Voting/
â”œâ”€â”€ app/                          # Next.js App Router
â”‚   â”œâ”€â”€ globals.css              # å…¨å±€æ ·å¼
â”‚   â”œâ”€â”€ layout.tsx               # æ ¹å¸ƒå±€
â”‚   â”œâ”€â”€ page.tsx                 # é¦–é¡µï¼ˆé‡å®šå‘ï¼‰
â”‚   â”œâ”€â”€ dashboard/               # æ¦œå•æ¦‚è§ˆ
â”‚   â”‚   â”œâ”€â”€ layout.tsx          
â”‚   â”‚   â””â”€â”€ page.tsx            
â”‚   â”œâ”€â”€ trend/                   # è¶‹åŠ¿åˆ†æ
â”‚   â”‚   â”œâ”€â”€ layout.tsx          
â”‚   â”‚   â””â”€â”€ page.tsx            
â”‚   â””â”€â”€ heat/                    # æ¦œå•çƒ­åº¦
â”‚       â”œâ”€â”€ layout.tsx          
â”‚       â””â”€â”€ page.tsx            
â”œâ”€â”€ components/                   # å¯å¤ç”¨ç»„ä»¶
â”‚   â””â”€â”€ ui/                     
â”‚       â”œâ”€â”€ navigation.tsx       # å¯¼èˆªç»„ä»¶
â”‚       â”œâ”€â”€ card.tsx            # å¡ç‰‡ç»„ä»¶
â”‚       â””â”€â”€ loading.tsx         # åŠ è½½ç»„ä»¶
â”œâ”€â”€ lib/                         # å·¥å…·åº“
â”‚   â”œâ”€â”€ utils.ts                # é€šç”¨å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ data-loader.ts          # æ•°æ®åŠ è½½å™¨
â”œâ”€â”€ types/                       # TypeScript ç±»å‹å®šä¹‰
â”‚   â””â”€â”€ index.ts                
â”œâ”€â”€ scripts/                     # è„šæœ¬
â”‚   â””â”€â”€ manual-collect.js       # æ‰‹åŠ¨æ•°æ®æ”¶é›†è„šæœ¬
â”œâ”€â”€ public/data/                 # æ•°æ®å­˜å‚¨ç›®å½•
â”‚   â”œâ”€â”€ manifest.json           # æ•°æ®æ¸…å•
â”‚   â”œâ”€â”€ run-records.json        # è¿è¡Œè®°å½•
â”‚   â””â”€â”€ *.json.gz               # å‹ç¼©çš„æ•°æ®æ–‡ä»¶
â””â”€â”€ public/                      # é™æ€èµ„æº
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Node.js 18+
- npm æˆ– yarn

### å®‰è£…ä¾èµ–
```bash
npm install
```

### å¼€å‘æ¨¡å¼
```bash
npm run dev
```

### ç”Ÿäº§æ„å»º
```bash
npm run build
```

## ğŸ“Š æ•°æ®æ”¶é›†

### æ‰‹åŠ¨æ•°æ®æ”¶é›†å‘½ä»¤

é¡¹ç›®é‡‡ç”¨æ‰‹åŠ¨æ•°æ®æ”¶é›†æ¨¡å¼ï¼Œæ¯å¤©éœ€è¦æ‰‹åŠ¨è¿è¡Œä¸€æ¬¡æ•°æ®æ”¶é›†å‘½ä»¤ï¼š

```bash
# æ”¶é›†ç¬¬ä¸€é˜¶æ®µæ•°æ®
npm run collect:first

# æ”¶é›†ç¬¬äºŒé˜¶æ®µæ•°æ®  
npm run collect:second

# æ”¶é›†ä¸¤ä¸ªé˜¶æ®µæ•°æ®
npm run collect:both
```

### æ•°æ®æ”¶é›†è¯´æ˜

- **æ”¶é›†é¢‘ç‡**: æ¯å¤©æ‰‹åŠ¨è¿è¡Œä¸€æ¬¡
- **æ•°æ®å­˜å‚¨**: è‡ªåŠ¨ä¿å­˜åˆ° `public/data/` ç›®å½•
- **æ–‡ä»¶æ ¼å¼**: å‹ç¼©çš„JSONæ–‡ä»¶ (`.json.gz`)
- **è®°å½•è¿½è¸ª**: è‡ªåŠ¨æ›´æ–°è¿è¡Œè®°å½•å’Œmanifestæ–‡ä»¶

### ç¯å¢ƒå˜é‡é…ç½®

åœ¨è¿è¡Œæ•°æ®æ”¶é›†å‰ï¼Œè¯·ç¡®ä¿è®¾ç½®äº†æ­£ç¡®çš„APIåœ°å€ï¼š

```bash
# è®¾ç½®APIåœ°å€
export FANFEVER_API_URL=https://lite-be.cfanfever.com/api/v1/fanfever

# ç„¶åè¿è¡Œæ•°æ®æ”¶é›†
npm run collect:first
```

## ğŸš€ éƒ¨ç½²

### Verceléƒ¨ç½²

1. è¿æ¥GitHubä»“åº“åˆ°Vercel
2. è®¾ç½®ç¯å¢ƒå˜é‡ `FANFEVER_API_URL`
3. è‡ªåŠ¨éƒ¨ç½²ï¼Œæ¯æ¬¡pushéƒ½ä¼šè§¦å‘é‡æ–°éƒ¨ç½²

## ğŸ“Š æ•°æ®æ ¼å¼

### å•æ—¥å¿«ç…§æ•°æ®ç»“æ„
```typescript
interface DailySnapshot {
  snapshot_date: string        // YYYY-MM-DD
  stage: 'first' | 'second'   // æŠ•ç¥¨é˜¶æ®µ
  categories: {
    [category: string]: Artist[]
  }
}

interface Artist {
  id: string
  name: string
  currentVotes: number
  rankToday: number
  rankYesterday?: number
  rankDelta: number           // æ’åå˜åŒ–
  category: string
}
```

### æ•°æ®æ–‡ä»¶å‘½å
- æ ¼å¼: `YYYY-MM-DD_stage.json.gz`
- ç¤ºä¾‹: `2025-07-18_first.json.gz`

## ğŸ”„ è‡ªåŠ¨åŒ–å·¥ä½œæµ

### GitHub Actions é…ç½®
- **è§¦å‘æ—¶é—´**: æ¯å¤© 12:05 (GMT+8)
- **æ‰‹åŠ¨è§¦å‘**: æ”¯æŒæŒ‡å®šæŠ•ç¥¨é˜¶æ®µ
- **æ•°æ®å¤„ç†**: è‡ªåŠ¨å‹ç¼©ã€æäº¤ã€éƒ¨ç½²

### å·¥ä½œæµç¨‹
1. ğŸ“¥ è·å–æŠ•ç¥¨æ•°æ® (APIè°ƒç”¨)
2. ğŸ—œï¸ æ•°æ®å‹ç¼© (Gzip)
3. ğŸ’¾ æ–‡ä»¶ä¿å­˜ (åŸå­æ“ä½œ)
4. ğŸ“ æ›´æ–°æ•°æ®æ¸…å•
5. ğŸš€ è‡ªåŠ¨éƒ¨ç½²åˆ° GitHub Pages

## ğŸ¨ è®¾è®¡ç³»ç»Ÿ

### è‰²å½©æ–¹æ¡ˆ
- **ä¸»è‰²**: `#ef4444` (çº¢è‰²)
- **è¾…è‰²**: `#64748b` (ç°è‰²)
- **æˆåŠŸ**: `#22c55e` (ç»¿è‰²)
- **è­¦å‘Š**: `#f59e0b` (æ©™è‰²)

### ç»„ä»¶åº“
- å¡ç‰‡ç»„ä»¶ (Card)
- æŒ‰é’®ç»„ä»¶ (Button)
- è¡¨æ ¼ç»„ä»¶ (Table)
- åŠ è½½ç»„ä»¶ (Loading)
- å¯¼èˆªç»„ä»¶ (Navigation)

## ğŸ“± å“åº”å¼è®¾è®¡

### æ–­ç‚¹è®¾ç½®
- **ç§»åŠ¨ç«¯**: < 768px
- **å¹³æ¿**: 768px - 1024px
- **æ¡Œé¢ç«¯**: > 1024px

### é€‚é…ç‰¹æ€§
- è¡¨æ ¼æ¨ªå‘æ»šåŠ¨
- å¯¼èˆªèœå•æŠ˜å 
- å›¾è¡¨å°ºå¯¸è‡ªé€‚åº”
- è™šæ‹Ÿæ»šåŠ¨ä¼˜åŒ–

## ğŸ”§ é…ç½®è¯´æ˜

### Next.js é…ç½®
- é™æ€å¯¼å‡º: `output: 'export'`
- åŸºç¡€è·¯å¾„: `/JMA-Voting` (GitHub Pages)
- å›¾ç‰‡ä¼˜åŒ–: ç¦ç”¨ (é™æ€å¯¼å‡ºè¦æ±‚)

### Tailwind é…ç½®
- è‡ªå®šä¹‰é¢œè‰²ä¸»é¢˜
- åŠ¨ç”»é…ç½®
- å“åº”å¼æ–­ç‚¹

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### æ•°æ®å¤„ç†
- Gzip å‹ç¼©å‡å°‘æ–‡ä»¶å¤§å°
- å®¢æˆ·ç«¯ç¼“å­˜ (SWR)
- æ‡’åŠ è½½å›¾è¡¨ç»„ä»¶
- è™šæ‹Ÿæ»šåŠ¨å¤§åˆ—è¡¨

### ç”¨æˆ·ä½“éªŒ
- åŠ è½½çŠ¶æ€å±•ç¤º
- é”™è¯¯è¾¹ç•Œå¤„ç†
- é˜²æŠ–æœç´¢è¾“å…¥
- å¹³æ»‘åŠ¨ç”»è¿‡æ¸¡

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°é¡µé¢
1. åœ¨ `app/` ä¸‹åˆ›å»ºæ–°ç›®å½•
2. æ·»åŠ  `layout.tsx` å’Œ `page.tsx`
3. æ›´æ–°å¯¼èˆªé…ç½®

### æ·»åŠ æ–°ç»„ä»¶
1. åœ¨ `components/ui/` ä¸‹åˆ›å»ºç»„ä»¶æ–‡ä»¶
2. éµå¾ªç°æœ‰è®¾è®¡ç³»ç»Ÿ
3. æ·»åŠ  TypeScript ç±»å‹å®šä¹‰

### æ•°æ®æ¥å£é›†æˆ
1. ä¿®æ”¹ `scripts/fetchVotes.js` ä¸­çš„APIè°ƒç”¨
2. æ›´æ–°æ•°æ®ç±»å‹å®šä¹‰
3. è°ƒæ•´æ•°æ®å¤„ç†é€»è¾‘

## ğŸ“‹ å¾…åŠäº‹é¡¹

- [ ] æ·»åŠ æ•°æ®å¯¼å‡ºä¸º Excel æ ¼å¼
- [ ] å®ç°ç”¨æˆ·åå¥½è®¾ç½®
- [ ] æ·»åŠ æ·±è‰²æ¨¡å¼æ”¯æŒ
- [ ] é›†æˆå®æ—¶é€šçŸ¥åŠŸèƒ½
- [ ] ä¼˜åŒ–å›¾è¡¨äº¤äº’ä½“éªŒ

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/amazing-feature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add amazing feature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/amazing-feature`)
5. æ‰“å¼€ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ”— ç›¸å…³é“¾æ¥

- [Next.js æ–‡æ¡£](https://nextjs.org/docs)
- [Tailwind CSS æ–‡æ¡£](https://tailwindcss.com/docs)
- [ECharts æ–‡æ¡£](https://echarts.apache.org/zh/index.html)
- [GitHub Actions æ–‡æ¡£](https://docs.github.com/actions)

---

**FanFever Team** Â© 2025